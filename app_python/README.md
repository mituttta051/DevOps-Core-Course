# DevOps Info Service

A production-ready Python web service providing comprehensive information about itself and its runtime environment. Built with FastAPI for modern async performance and automatic API documentation.

## Overview

The DevOps Info Service is a RESTful API that reports detailed system information, runtime statistics, and request metadata. This service serves as the foundation for a comprehensive monitoring tool that will evolve throughout the DevOps course.

## Prerequisites

- Python 3.11 or higher
- pip (Python package manager)

## Installation

1. **Clone the repository** (if applicable) or navigate to the project directory:
   ```bash
   cd app_python
   ```

2. **Create a virtual environment:**
   ```bash
   python3 -m venv venv
   ```

3. **Activate the virtual environment:**
   ```bash
   # On macOS/Linux:
   source venv/bin/activate
   
   # On Windows:
   venv\Scripts\activate
   ```

4. **Install dependencies:**
   ```bash
   pip install -r requirements.txt
   ```

## Running the Application

### Default Configuration

Run the application with default settings (listens on `0.0.0.0:5000`):

```bash
python3 app.py
```

### Custom Configuration

Configure the application using environment variables:

```bash
# Custom port
PORT=8000 python3 app.py

# Custom host and port
HOST=127.0.0.1 PORT=3000 python3 app.py

# Enable debug mode
DEBUG=true PORT=8000 python3 app.py
```

## API Endpoints

### `GET /`

Returns comprehensive service and system information.

**Response Example:**
```json
{
  "service": {
    "name": "devops-info-service",
    "version": "1.0.0",
    "description": "DevOps course info service",
    "framework": "FastAPI"
  },
  "system": {
    "hostname": "Anastasias-MacBook-Pro.local",
    "platform": "Darwin",
    "platform_version": "Darwin Kernel Version 25.2.0: Tue Nov 18 21:09:45 PST 2025; root:xnu-12377.61.12~1/RELEASE_ARM64_T6030",
    "architecture": "arm64",
    "cpu_count": 11,
    "python_version": "3.12.4"
  },
  "runtime": {
    "uptime_seconds": 2083,
    "uptime_human": "0 hours, 34 minutes",
    "current_time": "2026-01-26T17:22:56.847614Z",
    "timezone": "UTC"
  },
  "request": {
    "client_ip": "127.0.0.1",
    "user_agent": "yaak",
    "method": "GET",
    "path": "/"
  },
  "endpoints": [
    {
      "path": "/",
      "method": "GET",
      "description": "Service information"
    },
    {
      "path": "/health",
      "method": "GET",
      "description": "Health check"
    },
    {
      "path": "/docs",
      "method": "GET",
      "description": "API documentation"
    },
    {
      "path": "/openapi.json",
      "method": "GET",
      "description": "OpenAPI schema"
    }
  ]
}
```

### `GET /health`

Simple health check endpoint for monitoring and Kubernetes probes.

**Response Example:**
```json
{
  "status": "healthy",
  "timestamp": "2026-01-26T14:30:00.000Z",
  "uptime_seconds": 3600
}
```

**Status Code:** `200 OK` when healthy

### `GET /docs`

Interactive API documentation (Swagger UI) - automatically generated by FastAPI.

### `GET /openapi.json`

OpenAPI schema in JSON format.

## Configuration

The application can be configured using the following environment variables:

| Variable | Default | Description |
|----------|---------|-------------|
| `HOST` | `0.0.0.0` | Host address to bind the server |
| `PORT` | `5000` | Port number to listen on |
| `DEBUG` | `False` | Enable debug mode (auto-reload, verbose logging) |

## Docker

Build the image locally (from `app_python/`):

```bash
docker build -t <image-name> .
```

Run a container with port mapping:

```bash
docker run -p <host-port>:5000 <image-name>
```

Pull and run from Docker Hub (after publishing):

```bash
docker pull <docker-hub-username>/<repository-name>:<tag>
docker run -p <host-port>:5000 <docker-hub-username>/<repository-name>:<tag>
```

The app listens on port 5000 inside the container. Map it to a host port (e.g. `-p 8080:5000`) to access endpoints from the host.

## Testing the API

### Using curl

```bash
# Main endpoint
curl http://localhost:5000/

# Health check
curl http://localhost:5000/health

# Pretty-printed JSON
curl http://localhost:5000/ | python -m json.tool
```

## Project Structure

```
app_python/
├── app.py                    # Main application
├── requirements.txt          # Dependencies
├── Dockerfile                # Container image definition
├── .dockerignore             # Build context exclusions
├── .gitignore                # Git ignore rules
├── README.md                 # This file
├── tests/                    # Unit tests (Lab 3)
│   └── __init__.py
└── docs/                     # Lab documentation
    ├── LAB01.md              # Lab 1 submission
    ├── LAB02.md              # Lab 2 submission
    └── screenshots/          # Proof of work
```

## Development

### Code Quality

The code follows PEP 8 style guidelines and includes:
- Comprehensive error handling
- Structured logging
- Type hints for better code clarity
- Clean function organization

### Logging

The application logs to stdout with the following format:
```
YYYY-MM-DD HH:MM:SS - logger_name - LEVEL - message
```

Log level can be controlled via the `DEBUG` environment variable.

## License

This project is part of the DevOps Core Course.
